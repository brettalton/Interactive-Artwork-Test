<html>
	<head>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script type="text/javascript" src="jquery.color.js"></script>
		<script type="text/javascript">
			jQuery(document).ready(function(){

				var startWidth = 100; // represents 100%
				var widthRemaining = 100;

				$(document).mousemove(function(e){
					//$('#status').html(e.pageX +', '+ e.pageY);

					if (! $('body').hasClass('animating'))
					{
						/*var red = Math.floor(Math.random()*255);
						var green = Math.floor(Math.random()*255);
						var blue = Math.floor(Math.random()*255);
						var opacity = Math.random();
						console.log(red, green, blue, opacity);*/

						var linearConvertY = (((e.pageY) * 255) / $(document).height());
						console.log(linearConvertY);

						var linearConvertX = (((e.pageX) * 255) / $(document).width());
						console.log(linearConvertX);

						var newOpacity = (linearConvertX + linearConvertY) / 510;
						console.log(newOpacity);

						/*$('body').addClass('animating').stop().animate({
		                    backgroundColor: 'rgba(' + 0 + ', ' + Math.ceil(linearConvertX) + ', ' + Math.ceil(linearConvertY) + ', ' + newOpacity + ')'
		                }, 100, function(){
		                	$(this).removeClass('animating');
		                    console.log('done');
		                });*/

						if (widthRemaining > 0)
						{
							var width = Math.random();
							widthRemaining = widthRemaining - width;

							$('body').append('<div style="float: left; height: 100%; width: ' + width + '%; background-color: rgba(0, ' + Math.ceil(linearConvertX) + ', ' + Math.ceil(linearConvertY) + ', ' + newOpacity + ');"></div>');
						}

					}

				}); 
			})
		</script>
	</head>
	<body>
		<!--<h2 id="status">
			0, 0
		</h2>
		<div id="colour" style="height: 100px; width: 100px;"></div>-->
	</body>
</html>